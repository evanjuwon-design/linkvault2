<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="theme-color" content="#6366f1">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="apple-mobile-web-app-title" content="LinkVault">
    <link rel="manifest" href="manifest.json">
    <link rel="icon" type="image/png" href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAACXBIWXMAAAsTAAALEwEAmpwYAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyZpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDcuMS1jMDAwIDc5LmVkYTJiM2ZhYywgMjAyMS8xMS8xNy0xNzoyMzoxOSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIDIzLjEgKFdpbmRvd3MpIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOjlGMzQxQzg3QzJBNjExRUNCOEQzRjJDMDQwNjg3QjBGIiB4bXBNTTpEb2N1bWVudElEPSJ4bXAuZGlkOjlGMzQxQzg4QzJBNjExRUNCOEQzRjJDMDQwNjg3QjBGIj4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6OUYzNDFDODVDMkE2MTFFQ0I4RDNGMkMwNDA2ODdCMEYiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6OUYzNDFDODZDMkE2MTFFQ0I4RDNGMkMwNDA2ODdCMEYiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz5xUE5bAAADHklEQVR42rSXW0hUURSG/znOqKM5Ok7lpWkqL5VpaiYqGoJRUWQXIqKge+kh6KGXCHroISIiLyVJD0EQFARBD0EPvUQRFHSxUNEwRNS8ZHa/zKxm2o4zZ86ZmQ4sGM45+6y1/7X+tdc+GkEQBNi9XLELeNs7cD/bCNQDj4AXwEtgCvgB/JT+0gPRQCwQDyQAicAWYAvwGWgE7naO4Jcmg2ASqJICJoEUoAw4ACQ50fYT0AA8kORL4C3wAZgG/gCCFJsLRABRQAywHkgD0oEsoAB4BNwBRv4HQJeUqAOKgcNAvhTkCl+BbuA5MAK8B/4CMyoks3w5wDpgDbBRSpwHFErFnwA3gA/+AmgDtgMngWNAsguFzscX4BHQAfQAY8AXabKmS8Z0YBWQBGwHDgKHJMzvwFWgFfiTlgq7l1MA9NJK2oFT0iRYhU/ATeAaMMnIGI0bG9YCRwDtpc/w2VJgAKgys5AjgEbp5XQBe2Ugq/EXuA3UAvfMFHEEUAocBqqlHbYDPwGbVHS3cWcA54AuqYftKrwCuADckDYiEKRLb/Uu40oBG4Ez0ptIJNqBC1KgGWql4E2A1uyCHakArgPX/ATQJjVhJnBeKtosdEu70QNcAq5Ii+1PpEnA68AZN/YeAW5L7WkW3pBu3V6pA1cCPkkLeFxqvT+QuR8DLks3oRkcAS5K7/kBMAMMA/3SjeoLNCm4XmrBOj8BXJPey32gUnrvZkAr+TYfqJQ6sA5olPIqgFsAOpn/BwAlUhu2SV24wk8Ae6T2mwGfpPMhR7phfsDbjYWkN3AaOC4VbwY+Ax1O9DwOVEnHrxnolfbjhNSBywH0cnfmSgfxXqAYyPUTwFrpNjQDk8BVB9fzWundbQZGgXPS2bBcAhgl9QB6j3sCXC8dy2ahXrrRx0gL6JBO0Ax3igJpQs3An5kuqJF+BmjkG5FdK1Ui1U37boUnUv8XSd/QC1IT1ks//WoBvexuabGcla5lM/gc0HtfDWhkx90O6AWWSl24Qro3c6RvZ7p0j/4z1hj/rZkp/W+VfCsH/xVgAOSM3NWwvU6kAAAAAElFTkSuQmCC">
    <title>LinkVault üîê</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            --primary: #6366f1;
            --primary-dark: #4f46e5;
            --secondary: #8b5cf6;
            --success: #10b981;
            --danger: #ef4444;
            --warning: #f59e0b;
            --bg: #0f172a;
            --bg-light: #1e293b;
            --bg-card: #334155;
            --text: #f1f5f9;
            --text-muted: #94a3b8;
            --border: #475569;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
            background: var(--bg);
            color: var(--text);
            line-height: 1.6;
            -webkit-font-smoothing: antialiased;
            overflow-x: hidden;
        }

        /* Header */
        .header {
            background: linear-gradient(135deg, var(--primary) 0%, var(--secondary) 100%);
            padding: 1rem;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.3);
            position: sticky;
            top: 0;
            z-index: 100;
        }

        .header h1 {
            font-size: 1.5rem;
            font-weight: 700;
            text-align: center;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 0.5rem;
        }

        /* Container */
        .container {
            max-width: 800px;
            margin: 0 auto;
            padding: 1rem;
            padding-bottom: 5rem;
        }

        /* Tabs */
        .tabs {
            display: flex;
            gap: 0.5rem;
            margin-bottom: 1.5rem;
            background: var(--bg-light);
            padding: 0.5rem;
            border-radius: 12px;
        }

        .tab {
            flex: 1;
            padding: 0.75rem;
            border: none;
            background: transparent;
            color: var(--text-muted);
            font-size: 0.9rem;
            font-weight: 600;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 0.5rem;
        }

        .tab.active {
            background: var(--primary);
            color: white;
            transform: scale(1.05);
        }

        /* Card */
        .card {
            background: var(--bg-light);
            border-radius: 16px;
            padding: 1.5rem;
            margin-bottom: 1rem;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.2);
        }

        /* Form */
        .form-group {
            margin-bottom: 1.5rem;
        }

        .form-label {
            display: block;
            margin-bottom: 0.5rem;
            font-weight: 600;
            color: var(--text);
            font-size: 0.9rem;
        }

        .form-input {
            width: 100%;
            padding: 0.75rem 1rem;
            background: var(--bg-card);
            border: 2px solid var(--border);
            border-radius: 10px;
            color: var(--text);
            font-size: 1rem;
            transition: all 0.3s;
        }

        .form-input:focus {
            outline: none;
            border-color: var(--primary);
            box-shadow: 0 0 0 3px rgba(99, 102, 241, 0.1);
        }

        /* Button */
        .btn {
            width: 100%;
            padding: 0.875rem;
            border: none;
            border-radius: 10px;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 0.5rem;
        }

        .btn-primary {
            background: linear-gradient(135deg, var(--primary) 0%, var(--secondary) 100%);
            color: white;
        }

        .btn-primary:active {
            transform: scale(0.98);
        }

        .btn-secondary {
            background: var(--bg-card);
            color: var(--text);
            border: 2px solid var(--border);
        }

        .btn-danger {
            background: var(--danger);
            color: white;
        }

        .btn-success {
            background: var(--success);
            color: white;
        }

        /* Link Item */
        .link-item {
            background: var(--bg-card);
            border-radius: 12px;
            padding: 1rem;
            margin-bottom: 0.75rem;
            border: 1px solid var(--border);
            transition: all 0.3s;
            position: relative;
        }

        .link-item:active {
            transform: scale(0.98);
        }

        .link-title {
            font-weight: 600;
            font-size: 1rem;
            margin-bottom: 0.5rem;
            color: var(--text);
            word-break: break-word;
        }

        .link-url {
            color: var(--primary);
            font-size: 0.85rem;
            word-break: break-all;
            margin-bottom: 0.5rem;
        }

        .link-date {
            color: var(--text-muted);
            font-size: 0.75rem;
        }

        .link-actions {
            display: flex;
            gap: 0.5rem;
            margin-top: 0.75rem;
        }

        .link-actions button {
            padding: 0.5rem 1rem;
            font-size: 0.85rem;
            flex: 1;
        }

        /* Empty State */
        .empty-state {
            text-align: center;
            padding: 3rem 1rem;
            color: var(--text-muted);
        }

        .empty-state-icon {
            font-size: 4rem;
            margin-bottom: 1rem;
            opacity: 0.5;
        }

        /* Stats */
        .stats {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 1rem;
            margin-bottom: 1.5rem;
        }

        .stat-card {
            background: var(--bg-card);
            padding: 1rem;
            border-radius: 12px;
            text-align: center;
            border: 1px solid var(--border);
        }

        .stat-number {
            font-size: 2rem;
            font-weight: 700;
            color: var(--primary);
        }

        .stat-label {
            color: var(--text-muted);
            font-size: 0.85rem;
            margin-top: 0.25rem;
        }

        /* Toast */
        .toast {
            position: fixed;
            bottom: 5rem;
            left: 50%;
            transform: translateX(-50%) translateY(100px);
            background: var(--bg-light);
            color: var(--text);
            padding: 1rem 1.5rem;
            border-radius: 10px;
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.5);
            z-index: 1000;
            opacity: 0;
            transition: all 0.3s;
            max-width: 90%;
            display: flex;
            align-items: center;
            gap: 0.75rem;
            border: 1px solid var(--border);
        }

        .toast.show {
            opacity: 1;
            transform: translateX(-50%) translateY(0);
        }

        .toast.success {
            border-left: 4px solid var(--success);
        }

        .toast.error {
            border-left: 4px solid var(--danger);
        }

        /* Loading */
        .loading {
            display: inline-block;
            width: 20px;
            height: 20px;
            border: 3px solid rgba(255, 255, 255, 0.3);
            border-top-color: white;
            border-radius: 50%;
            animation: spin 0.8s linear infinite;
        }

        @keyframes spin {
            to { transform: rotate(360deg); }
        }

        /* Hidden */
        .hidden {
            display: none !important;
        }

        /* Search */
        .search-box {
            margin-bottom: 1rem;
        }

        /* Export Section */
        .export-options {
            display: grid;
            gap: 0.75rem;
            margin-top: 1rem;
        }

        .export-info {
            background: var(--bg-card);
            padding: 1rem;
            border-radius: 10px;
            border-left: 4px solid var(--primary);
            margin-top: 1rem;
        }

        .export-info-title {
            font-weight: 600;
            margin-bottom: 0.5rem;
        }

        .export-info-text {
            font-size: 0.9rem;
            color: var(--text-muted);
        }
    </style>
</head>
<body>
    <!-- Header -->
    <div class="header">
        <h1>üîê LinkVault</h1>
    </div>

    <!-- Container -->
    <div class="container">
        <!-- Tabs -->
        <div class="tabs">
            <button class="tab active" onclick="switchTab('add')">
                üìù Add Link
            </button>
            <button class="tab" onclick="switchTab('view')">
                üëÄ My Links
            </button>
            <button class="tab" onclick="switchTab('export')">
                üíæ Backup
            </button>
        </div>

        <!-- Add Link Tab -->
        <div id="add-tab" class="tab-content">
            <div class="card">
                <form id="add-form" onsubmit="addLink(event)">
                    <div class="form-group">
                        <label class="form-label">üîó Enter URL</label>
                        <input 
                            type="text" 
                            id="url-input" 
                            class="form-input" 
                            placeholder="https://example.com or example.com"
                            required
                        >
                    </div>

                    <div class="form-group">
                        <label class="form-label">üì∞ Page Title</label>
                        <input 
                            type="text" 
                            id="title-input" 
                            class="form-input" 
                            placeholder="Will be fetched automatically..."
                        >
                        <small style="color: var(--text-muted); font-size: 0.85rem; display: block; margin-top: 0.5rem;">
                            Leave empty to auto-fetch, or enter a custom title
                        </small>
                    </div>

                    <button type="submit" class="btn btn-primary" id="add-btn">
                        <span id="add-btn-text">üíæ Save Link</span>
                        <span id="add-btn-loading" class="hidden"><div class="loading"></div> Saving...</span>
                    </button>
                </form>
            </div>
        </div>

        <!-- View Links Tab -->
        <div id="view-tab" class="tab-content hidden">
            <!-- Stats -->
            <div class="stats">
                <div class="stat-card">
                    <div class="stat-number" id="total-links">0</div>
                    <div class="stat-label">Total Links</div>
                </div>
                <div class="stat-card">
                    <div class="stat-number" id="today-links">0</div>
                    <div class="stat-label">Added Today</div>
                </div>
            </div>

            <!-- Search -->
            <div class="search-box">
                <input 
                    type="text" 
                    id="search-input" 
                    class="form-input" 
                    placeholder="üîç Search links..."
                    oninput="filterLinks()"
                >
            </div>

            <!-- Links Container -->
            <div id="links-container"></div>
        </div>

        <!-- Export Tab -->
        <div id="export-tab" class="tab-content hidden">
            <div class="card">
                <h3 style="margin-bottom: 1rem; font-size: 1.25rem;">üì§ Export Your Links</h3>
                
                <div class="export-options">
                    <button class="btn btn-primary" onclick="downloadCSV()">
                        üìä Download as CSV
                    </button>
                    
                    <button class="btn btn-secondary" onclick="downloadJSON()">
                        üìã Download as JSON
                    </button>
                    
                    <button class="btn btn-secondary" onclick="copyToClipboard()">
                        üìã Copy All Links
                    </button>
                </div>

                <div class="export-info">
                    <div class="export-info-title">üí° How to backup:</div>
                    <div class="export-info-text">
                        1. Click "Download as CSV" to save your links<br>
                        2. Upload the file to Google Drive, Dropbox, or email it to yourself<br>
                        3. Your data is stored locally on your device and never sent to any server
                    </div>
                </div>

                <div style="margin-top: 1.5rem; padding-top: 1.5rem; border-top: 1px solid var(--border);">
                    <button class="btn btn-danger" onclick="clearAllLinks()">
                        üóëÔ∏è Clear All Links
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Toast Notification -->
    <div id="toast" class="toast"></div>

    <script>
        // ============================================================================
        // Data Management
        // ============================================================================

        // Get links from localStorage
        function getLinks() {
            const links = localStorage.getItem('linkvault_links');
            return links ? JSON.parse(links) : [];
        }

        // Save links to localStorage
        function saveLinks(links) {
            localStorage.setItem('linkvault_links', JSON.stringify(links));
        }

        // ============================================================================
        // Tab Management
        // ============================================================================

        function switchTab(tabName) {
            // Hide all tabs
            document.querySelectorAll('.tab-content').forEach(tab => {
                tab.classList.add('hidden');
            });

            // Remove active class from all tab buttons
            document.querySelectorAll('.tab').forEach(btn => {
                btn.classList.remove('active');
            });

            // Show selected tab
            document.getElementById(`${tabName}-tab`).classList.remove('hidden');

            // Add active class to clicked tab button
            event.target.closest('.tab').classList.add('active');

            // If viewing links, refresh the display
            if (tabName === 'view') {
                displayLinks();
            }
        }

        // ============================================================================
        // Add Link Functionality
        // ============================================================================

        async function addLink(event) {
            event.preventDefault();

            const urlInput = document.getElementById('url-input');
            const titleInput = document.getElementById('title-input');
            const addBtn = document.getElementById('add-btn-text');
            const addBtnLoading = document.getElementById('add-btn-loading');

            let url = urlInput.value.trim();
            let title = titleInput.value.trim();

            // Validate URL
            if (!url) {
                showToast('Please enter a URL', 'error');
                return;
            }

            // Add https:// if not present
            if (!url.startsWith('http://') && !url.startsWith('https://')) {
                url = 'https://' + url;
            }

            // Show loading state
            addBtn.classList.add('hidden');
            addBtnLoading.classList.remove('hidden');

            // Fetch title if not provided
            if (!title) {
                title = await fetchPageTitle(url);
            }

            // Create link object
            const link = {
                id: Date.now(),
                url: url,
                title: title,
                dateAdded: new Date().toISOString()
            };

            // Save to storage
            const links = getLinks();
            links.unshift(link); // Add to beginning
            saveLinks(links);

            // Reset form
            urlInput.value = '';
            titleInput.value = '';

            // Hide loading state
            addBtn.classList.remove('hidden');
            addBtnLoading.classList.add('hidden');

            // Show success message
            showToast('‚úÖ Link saved successfully!', 'success');

            // Update view tab if it's active
            displayLinks();
        }

        // Fetch page title from URL
        async function fetchPageTitle(url) {
            try {
                // Use a CORS proxy to fetch the page
                const response = await fetch(`https://api.allorigins.win/get?url=${encodeURIComponent(url)}`);
                const data = await response.json();
                const html = data.contents;

                // Extract title using regex
                const match = html.match(/<title[^>]*>([^<]+)<\/title>/i);
                if (match && match[1]) {
                    return match[1].trim();
                }

                // If no title found, use URL as title
                return new URL(url).hostname;
            } catch (error) {
                console.error('Error fetching title:', error);
                // Return hostname as fallback
                try {
                    return new URL(url).hostname;
                } catch {
                    return 'Untitled Link';
                }
            }
        }

        // ============================================================================
        // Display Links
        // ============================================================================

        function displayLinks(searchTerm = '') {
            const container = document.getElementById('links-container');
            const links = getLinks();

            // Filter links if search term provided
            const filteredLinks = searchTerm
                ? links.filter(link =>
                    link.title.toLowerCase().includes(searchTerm.toLowerCase()) ||
                    link.url.toLowerCase().includes(searchTerm.toLowerCase())
                )
                : links;

            // Update stats
            document.getElementById('total-links').textContent = links.length;
            const today = new Date().toDateString();
            const todayCount = links.filter(link =>
                new Date(link.dateAdded).toDateString() === today
            ).length;
            document.getElementById('today-links').textContent = todayCount;

            // Display links
            if (filteredLinks.length === 0) {
                container.innerHTML = `
                    <div class="empty-state">
                        <div class="empty-state-icon">üì≠</div>
                        <p>${searchTerm ? 'No links match your search' : 'No links saved yet!'}</p>
                        <p style="font-size: 0.9rem; margin-top: 0.5rem;">
                            ${searchTerm ? 'Try a different search term' : 'Start adding links from the Add Link tab'}
                        </p>
                    </div>
                `;
                return;
            }

            container.innerHTML = filteredLinks.map(link => `
                <div class="link-item">
                    <div class="link-title">${escapeHtml(link.title)}</div>
                    <a href="${escapeHtml(link.url)}" class="link-url" target="_blank" rel="noopener">
                        ${escapeHtml(link.url)}
                    </a>
                    <div class="link-date">üìÖ ${formatDate(link.dateAdded)}</div>
                    <div class="link-actions">
                        <button class="btn btn-primary" onclick="openLink('${escapeHtml(link.url)}')">
                            üîó Open
                        </button>
                        <button class="btn btn-danger" onclick="deleteLink(${link.id})">
                            üóëÔ∏è Delete
                        </button>
                    </div>
                </div>
            `).join('');
        }

        // Filter links based on search
        function filterLinks() {
            const searchTerm = document.getElementById('search-input').value;
            displayLinks(searchTerm);
        }

        // Open link in new tab
        function openLink(url) {
            window.open(url, '_blank', 'noopener,noreferrer');
        }

        // Delete a link
        function deleteLink(id) {
            if (confirm('Are you sure you want to delete this link?')) {
                const links = getLinks();
                const filtered = links.filter(link => link.id !== id);
                saveLinks(filtered);
                displayLinks();
                showToast('Link deleted', 'success');
            }
        }

        // ============================================================================
        // Export Functions
        // ============================================================================

        function downloadCSV() {
            const links = getLinks();

            if (links.length === 0) {
                showToast('No links to export', 'error');
                return;
            }

            // Create CSV content
            let csv = 'Date Added,URL,Title\n';
            links.forEach(link => {
                const date = new Date(link.dateAdded).toLocaleString();
                csv += `"${date}","${link.url}","${link.title}"\n`;
            });

            // Download file
            downloadFile(csv, 'linkvault_backup.csv', 'text/csv');
            showToast('CSV downloaded successfully!', 'success');
        }

        function downloadJSON() {
            const links = getLinks();

            if (links.length === 0) {
                showToast('No links to export', 'error');
                return;
            }

            const json = JSON.stringify(links, null, 2);
            downloadFile(json, 'linkvault_backup.json', 'application/json');
            showToast('JSON downloaded successfully!', 'success');
        }

        function copyToClipboard() {
            const links = getLinks();

            if (links.length === 0) {
                showToast('No links to copy', 'error');
                return;
            }

            let text = 'My Saved Links\n\n';
            links.forEach((link, index) => {
                text += `${index + 1}. ${link.title}\n`;
                text += `   ${link.url}\n`;
                text += `   Added: ${formatDate(link.dateAdded)}\n\n`;
            });

            navigator.clipboard.writeText(text).then(() => {
                showToast('Links copied to clipboard!', 'success');
            }).catch(() => {
                showToast('Failed to copy links', 'error');
            });
        }

        function clearAllLinks() {
            if (confirm('‚ö†Ô∏è This will delete ALL your saved links. This cannot be undone!\n\nAre you sure?')) {
                if (confirm('Really sure? This is your last chance!')) {
                    localStorage.removeItem('linkvault_links');
                    displayLinks();
                    showToast('All links cleared', 'success');
                }
            }
        }

        // Helper function to download file
        function downloadFile(content, filename, type) {
            const blob = new Blob([content], { type });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = filename;
            document.body.appendChild(a);
            a.click();
            document.body.removeChild(a);
            URL.revokeObjectURL(url);
        }

        // ============================================================================
        // Utility Functions
        // ============================================================================

        function showToast(message, type = 'success') {
            const toast = document.getElementById('toast');
            toast.textContent = message;
            toast.className = `toast ${type} show`;

            setTimeout(() => {
                toast.classList.remove('show');
            }, 3000);
        }

        function formatDate(dateString) {
            const date = new Date(dateString);
            const now = new Date();
            const diff = now - date;
            const days = Math.floor(diff / (1000 * 60 * 60 * 24));

            if (days === 0) return 'Today';
            if (days === 1) return 'Yesterday';
            if (days < 7) return `${days} days ago`;

            return date.toLocaleDateString();
        }

        function escapeHtml(text) {
            const div = document.createElement('div');
            div.textContent = text;
            return div.innerHTML;
        }

        // ============================================================================
        // Initialize
        // ============================================================================

        // Load links on page load
        window.addEventListener('load', () => {
            displayLinks();
        });

        // Register Service Worker for PWA
        if ('serviceWorker' in navigator) {
            navigator.serviceWorker.register('sw.js').catch(() => {
                console.log('Service worker registration failed');
            });
        }
    </script>
</body>
</html>
